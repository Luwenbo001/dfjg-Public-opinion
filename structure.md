<!-- 
1. 框架图：这个agent包含哪些模块，每个模块的职责，输入和输出以及整个系统的输入和输出要求。
2. 每个模块的一些细节，比如数据源列表、关键词列表、模块的详细配置项、逻辑分支等。 -->

# agent模块

## 主体client
### 模型qwen-plus
### 非流式输出
### few-shot给出舆情处理工具链调用模板
### 工作流程
#### 创建工具 连接工具 进行用户输入
#### 判断为舆情分析任务，先后调用两个工具
#### 

## 工具1：爬虫工具（start_crawler）
### 目前仅实现微博爬虫，后续增加不同平台
### 没有输入参数
### 数据源列表
#### keyword list目前仅局限于公司名字（东方精工），后续可更改
#### 爬虫爬取时间范围目前设置为昨天（可随时调整）
### 返回内容：dict格式，爬虫是否成功结束，若成功结束，返回文件为结果路径
### 工作流程：
#### 获取日期，修改爬虫的setting
#### 运行爬虫，输出日志

## 工具2：分析工具（wb_analysis_tool）
### 模型：QwQ-plus
#### 仅有流式输出
#### 性能相较qwen-plus更强
### 输入：爬虫收集到的csv文件路径
### 输出：
#### 写入新的csv文件，包括原文和逐条分析结果，对应精炼的四个问题
##### 是否为对公司进行的负面报道、不实报道
##### 是否为会上存在的已经或将给公司造成不良影响的传言或信息
##### 是否为可能或者已经影响社会公众投资者投资取向，造成公司股价异常波动的信息
##### 是否为涉及公司信息披露且可能对公司股票及其衍生品交易价格产生较大影响的事
#### 返回client：300字左右str类型，内容为总括分析，client特判后输出到终端
#### 工作流程
##### 首先调用llm_stock_check.py文件，对爬虫手机到的数据CSV进行逐条的分析，做4个二分类，写入到_output.csv
##### 读取_output.csv，将内容结合prompt输入给大模型，让其生成简报
##### 返回简报内容到client
